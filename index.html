<!doctype html>

<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Notebook & Tools</title>
  <style>
    :root{--bg:#f6f7fb;--card:#ffffff;--accent:#6c5ce7;--muted:#97a0b8}
    *{box-sizing:border-box;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, 'Noto Sans', 'Helvetica Neue', Arial}
    body{margin:0;background:var(--bg);color:#111}
    header{background:linear-gradient(90deg, #f8f9ff 0%, #fff 100%);padding:16px 20px;display:flex;align-items:center;gap:16px;border-bottom:1px solid rgba(16,24,40,0.04)}
    header h1{font-size:18px;margin:0}
    .container{display:grid;grid-template-columns:360px 1fr 420px;gap:18px;padding:20px;max-width:1280px;margin:18px auto}/* column cards */
.card{background:var(--card);border-radius:12px;padding:14px;box-shadow:0 6px 18px rgba(28,36,64,0.06);min-height:120px}
.card h2{margin:0 0 10px 0;font-size:15px}

/* Notes */
.notes-area{display:flex;flex-direction:column;gap:8px}
textarea{width:100%;min-height:220px;border-radius:8px;border:1px solid #e6e9f0;padding:10px;font-size:14px;resize:vertical}
.notes-actions{display:flex;gap:8px;align-items:center}
.btn{background:var(--accent);color:white;padding:8px 10px;border-radius:8px;border:none;cursor:pointer}
.btn.ghost{background:transparent;color:var(--accent);border:1px solid rgba(108,92,231,0.12)}

/* List */
.list{display:flex;flex-direction:column;gap:8px}
.list-input{display:flex;gap:8px}
.list-input input{flex:1;padding:8px;border-radius:8px;border:1px solid #e6e9f0}
.todo-item{display:flex;align-items:center;gap:10px;padding:8px;border-radius:8px;border:1px solid rgba(16,24,40,0.04)}
.todo-item.completed .text{opacity:0.5;text-decoration:line-through}
.todo-item .text{flex:1}

/* Calculator */
.calc{display:grid;grid-template-columns:1fr 1fr;gap:8px}
.calc-screen{grid-column:1/-1;background:#0f1724;color:white;padding:12px;border-radius:8px;font-size:20px;text-align:right}
.calc-buttons{display:grid;grid-template-columns:repeat(4,1fr);gap:8px}
.calc-buttons button{padding:12px;border-radius:8px;border:1px solid rgba(16,24,40,0.04);font-size:16px;cursor:pointer}

/* Accounting table */
.table-wrap{overflow:auto}
table{width:100%;border-collapse:collapse}
th,td{padding:8px;border-bottom:1px solid #eef2f7;text-align:left;font-size:14px}
th{background:transparent;color:var(--muted);font-weight:600}
.small{font-size:13px;color:var(--muted)}
.controls{display:flex;gap:8px;align-items:center}

footer{max-width:1280px;margin:0 auto;padding:14px 20px;color:var(--muted);font-size:13px}

/* responsive */
@media (max-width:1000px){.container{grid-template-columns:1fr;padding:12px}.calc{grid-column:1/-1}.card{min-height:80px}}

  </style>
</head>
<body>
  <header>
    <h1>Notebook & Tools ‚Äî ‡πÇ‡∏ô‡πâ‡∏ï, ‡∏•‡∏¥‡∏™‡∏ï‡πå, ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç, ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</h1>
    <div style="margin-left:auto;display:flex;gap:8px;align-items:center">
      <button id="exportAll" class="btn ghost">Export CSV</button>
      <button id="clearAll" class="btn ghost">‡∏•‡πâ‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
      <span class="small">(‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå)</span>
    </div>
  </header>  <main class="container">
    <!-- Left: Notes & To-do -->
    <section class="card">
      <h2>‡πÇ‡∏ô‡πâ‡∏ï</h2>
      <div class="notes-area">
        <textarea id="noteText" placeholder="‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏ô‡πâ‡∏ï‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà..."></textarea>
        <div class="notes-actions">
          <button id="saveNote" class="btn">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÇ‡∏ô‡πâ‡∏ï</button>
          <button id="newNote" class="btn ghost">‡πÇ‡∏ô‡πâ‡∏ï‡πÉ‡∏´‡∏°‡πà</button>
          <div style="margin-left:auto;color:var(--muted);font-size:13px">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</div>
        </div>
      </div><hr style="margin:12px 0;border:none;border-top:1px solid #f1f3f8">

  <h2>‡∏•‡∏¥‡∏™‡∏ï‡πå‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (To‚ÄëDo)</h2>
  <div class="list">
    <div class="list-input">
      <input id="todoInput" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î Enter ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£" />
      <button id="addTodo" class="btn">‡πÄ‡∏û‡∏¥‡πà‡∏°</button>
    </div>
    <div id="todos"></div>
  </div>
</section>

<!-- Middle: Calculator & Quick stats -->
<section class="card">
  <h2>‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç</h2>
  <div class="calc">
    <div id="calcScreen" class="calc-screen">0</div>
    <div class="calc-buttons" id="calcButtons">
      <button data-val="7">7</button>
      <button data-val="8">8</button>
      <button data-val="9">9</button>
      <button data-op="/">√∑</button>

      <button data-val="4">4</button>
      <button data-val="5">5</button>
      <button data-val="6">6</button>
      <button data-op="*">√ó</button>

      <button data-val="1">1</button>
      <button data-val="2">2</button>
      <button data-val="3">3</button>
      <button data-op="-">‚àí</button>

      <button data-val="0">0</button>
      <button id="dot" data-val=".">.</button>
      <button id="equals">=</button>
      <button data-op="+">+</button>

      <button id="clear" style="grid-column:span:2">C</button>
      <button id="back">‚Üê</button>
      <button id="memSave">MS</button>
      <button id="memRecall">MR</button>
    </div>
  </div>

  <hr style="margin:12px 0;border:none;border-top:1px solid #f1f3f8">

  <h2>‡∏™‡∏£‡∏∏‡∏õ‡∏î‡πà‡∏ß‡∏ô</h2>
  <div class="small">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠: <strong id="todoCount">0</strong></div>
  <div class="small">‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏∏‡∏ó‡∏ò‡∏¥ (‡∏ö‡∏±‡∏ç‡∏ä‡∏µ): <strong id="netBalance">0.00</strong></div>
</section>

<!-- Right: Accounting table -->
<aside class="card">
  <h2>‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ (Income / Expense)</h2>
  <div class="controls" style="margin-bottom:8px">
    <input id="desc" placeholder="‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢" style="flex:1;padding:8px;border-radius:8px;border:1px solid #e6e9f0" />
    <input id="income" placeholder="‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö" style="width:110px;padding:8px;border-radius:8px;border:1px solid #e6e9f0" />
    <input id="expense" placeholder="‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢" style="width:110px;padding:8px;border-radius:8px;border:1px solid #e6e9f0" />
    <button id="addRow" class="btn">‡πÄ‡∏û‡∏¥‡πà‡∏°</button>
  </div>
  <div class="table-wrap">
    <table id="accountTable">
      <thead>
        <tr><th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th><th>‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</th><th>‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö</th><th>‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</th><th>‡∏¢‡∏≠‡∏î‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠</th><th></th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
  <div style="margin-top:12px;display:flex;gap:8px;align-items:center">
    <button id="exportCSV" class="btn ghost">Export CSV</button>
    <button id="clearAccounts" class="btn ghost">‡∏•‡πâ‡∏≤‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</button>
    <div style="margin-left:auto;font-weight:600">Total: <span id="totalAmount">0.00</span></div>
  </div>
</aside>

  </main>  <footer>‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‚Äî ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô Local Storage ‡∏Ç‡∏≠‡∏á‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå</footer>  <script>
    /* ---------- Utilities ---------- */
    const $ = id => document.getElementById(id);
    const saveToLS = (k,v) => localStorage.setItem('notebook:'+k, JSON.stringify(v));
    const loadFromLS = k => { try { return JSON.parse(localStorage.getItem('notebook:'+k)) } catch(e){return null} }

    /* ---------- Notes ---------- */
    const noteText = $('noteText');
    noteText.value = loadFromLS('note') || '';
    noteText.addEventListener('input', ()=> saveToLS('note', noteText.value));
    $('saveNote').addEventListener('click', ()=> { saveToLS('note', noteText.value); alert('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢'); })
    $('newNote').addEventListener('click', ()=> { if(confirm('‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ô‡πâ‡∏ï‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏•‡∏∞‡∏•‡∏ö‡πÇ‡∏ô‡πâ‡∏ï‡πÄ‡∏Å‡πà‡∏≤?')){ noteText.value=''; saveToLS('note',''); } })

    /* ---------- To-Do List ---------- */
    let todos = loadFromLS('todos') || [];
    const todosEl = $('todos'), todoInput = $('todoInput');
    function renderTodos(){ todosEl.innerHTML=''; todos.forEach((t,i)=>{
      const div = document.createElement('div'); div.className = 'todo-item' + (t.done? ' completed':'');
      const cb = document.createElement('input'); cb.type='checkbox'; cb.checked = !!t.done; cb.addEventListener('change',()=>{ todos[i].done = cb.checked; saveToLS('todos',todos); renderTodos(); refreshSummary(); });
      const text = document.createElement('div'); text.className='text'; text.textContent = t.text;
      const btns = document.createElement('div'); btns.style.display='flex'; btns.style.gap='6px';
      const edit = document.createElement('button'); edit.textContent='‚úé'; edit.className='btn ghost'; edit.style.padding='6px'; edit.onclick = ()=>{ const v = prompt('‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£', t.text); if(v!=null){ todos[i].text=v; saveToLS('todos',todos); renderTodos(); }}
      const del = document.createElement('button'); del.textContent='üóë'; del.className='btn ghost'; del.style.padding='6px'; del.onclick = ()=>{ if(confirm('‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ?')){ todos.splice(i,1); saveToLS('todos',todos); renderTodos(); refreshSummary(); }}
      div.appendChild(cb); div.appendChild(text); btns.appendChild(edit); btns.appendChild(del); div.appendChild(btns);
      todosEl.appendChild(div);
    })}
    function addTodo(text){ todos.unshift({text,done:false,created:Date.now()}); saveToLS('todos',todos); renderTodos(); refreshSummary(); }
    $('addTodo').addEventListener('click', ()=> { if(todoInput.value.trim()) addTodo(todoInput.value.trim()); todoInput.value=''; })
    todoInput.addEventListener('keypress', e=>{ if(e.key==='Enter' && todoInput.value.trim()){ addTodo(todoInput.value.trim()); todoInput.value=''; } })
    renderTodos();

    /* ---------- Calculator ---------- */
    const calcScreen = $('calcScreen');
    let calcExp = '';
    let mem = loadFromLS('calc_mem') || 0;
    function updateScreen(){ calcScreen.textContent = calcExp || '0' }
    document.querySelectorAll('#calcButtons button').forEach(b=>{
      b.addEventListener('click', ()=>{
        const v = b.dataset.val; const op = b.dataset.op;
        if(v!==undefined){ calcExp += v; updateScreen(); saveToLS('calc_exp',calcExp); return }
        if(op!==undefined){ // operator
          calcExp += op; updateScreen(); return
        }
        if(b.id==='equals'){ try{ const res = Function('return '+calcExp)(); calcExp = String(res); updateScreen(); saveToLS('calc_last',calcExp); }catch(e){ alert('‡∏™‡∏π‡∏ï‡∏£‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á'); } }
        if(b.id==='clear'){ calcExp=''; updateScreen(); }
        if(b.id==='back'){ calcExp = calcExp.slice(0,-1); updateScreen(); }
        if(b.id==='memSave'){ try{ const val = parseFloat(calcExp||0); mem = val; saveToLS('calc_mem',mem); alert('‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡πà‡∏≤‡πÉ‡∏ô‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥: '+mem); }catch(e){}};
        if(b.id==='memRecall'){ calcExp += String(mem); updateScreen(); }
      })
    })
    calcExp = loadFromLS('calc_exp') || '' ; updateScreen();

    /* ---------- Accounting ---------- */
    let accounts = loadFromLS('accounts') || [];
    const tbody = document.querySelector('#accountTable tbody');
    function renderAccounts(){ tbody.innerHTML=''; let balance = 0;
      accounts.forEach((r,idx)=>{
        balance += (parseFloat(r.income)||0) - (parseFloat(r.expense)||0);
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>${new Date(r.date).toLocaleDateString()}</td><td>${r.desc||''}</td><td>${r.income||''}</td><td>${r.expense||''}</td><td>${balance.toFixed(2)}</td><td><button data-i="${idx}" class='btn ghost' style='padding:6px'>‡∏•‡∏ö</button></td>`;
        tbody.appendChild(tr);
      })
      $('totalAmount').textContent = balance.toFixed(2);
      $('netBalance').textContent = balance.toFixed(2);
      saveToLS('accounts',accounts);
    }
    $('addRow').addEventListener('click', ()=>{
      const desc = $('desc').value.trim(); const income = parseFloat($('income').value) || 0; const expense = parseFloat($('expense').value) || 0;
      if(!desc){ alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢'); return }
      accounts.push({date:Date.now(),desc, income: income? income.toFixed(2): '', expense: expense? expense.toFixed(2): ''});
      $('desc').value=''; $('income').value=''; $('expense').value=''; renderAccounts();
    })
    tbody.addEventListener('click', e=>{ if(e.target.matches('button')){ const i = parseInt(e.target.dataset.i); if(confirm('‡∏•‡∏ö‡πÅ‡∏ñ‡∏ß‡∏ô‡∏µ‡πâ?')){ accounts.splice(i,1); renderAccounts(); } } })

    /* Export CSV */
    function toCSV(rows){ return rows.map(r=> r.map(c=> '"'+String(c||'').replace(/"/g,'""')+'"').join(',')).join('\n') }
    $('exportCSV').addEventListener('click', ()=>{
      const rows = [['Date','Description','Income','Expense']].concat(accounts.map(r=>[ new Date(r.date).toLocaleString(), r.desc, r.income, r.expense ]));
      const csv = toCSV(rows);
      const blob = new Blob([csv], {type:'text/csv'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href=url; a.download='accounts.csv'; document.body.appendChild(a); a.click(); a.remove();
    })
    $('exportAll').addEventListener('click', ()=>{
      // combine notes, todos, accounts into one CSV-like text
      const notes = loadFromLS('note')||'';
      const todosSave = loadFromLS('todos') || [];
      const rows = [['Notes','', ''], [notes,'',''], [], ['Todos (done?','text','date']].concat(todosSave.map(t=>[t.done? 'YES':'NO', t.text, new Date(t.created||0).toLocaleString()]));
      const csv = toCSV(rows);
      const blob = new Blob([csv], {type:'text/csv'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href=url; a.download='notebook_export.csv'; document.body.appendChild(a); a.click(); a.remove();
    })

    /* Clear All */
    $('clearAll').addEventListener('click', ()=>{
      if(!confirm('‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô Local Storage?')) return;
      localStorage.clear(); location.reload();
    })
    $('clearAccounts').addEventListener('click', ()=>{ if(confirm('‡∏•‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ç‡∏ä‡∏µ?')){ accounts=[]; renderAccounts(); } })

    renderAccounts();

    /* ---------- Helpers ---------- */
    function refreshSummary(){ $('todoCount').textContent = (todos.filter(t=>!t.done).length) }
    refreshSummary();

    // save on unload
    window.addEventListener('beforeunload', ()=>{
      saveToLS('todos',todos); saveToLS('accounts',accounts); saveToLS('note', noteText.value); saveToLS('calc_exp', calcExp);
    })
  </script></body>
</html>